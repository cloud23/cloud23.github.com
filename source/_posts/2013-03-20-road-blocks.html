---
layout: post
title: "Road Blocks"
date: 2013-03-20 22:48
comments: true
categories: [grails, jdk, JAVA_HOME]
---

<section>
	<article>
		<p>
			I recently started my new job in a new company after working in a construction firm as a software developer in Nigeria for almost 4 years. I was developing .Net window-based and web-based applications in Windows then which is totally different from the current company I belong now since they don't use any Microsoft products for development. For a .Net developer like me there is quite a bit of a learning curve that needs to be covered. I'm sure I am not the only one undergoing this transition, which is why I would like to post here all the "Road Blocks" or transition difficulties that I encountered or will encounter. I will also post here the solutions to these problems once I solved them.
		</p>
		<!-- more -->
		<h2>OS Transition</h2>
		<p>
			Right after I quit the old job, I had to say bye bye to Windows OS. I installed Ubuntu on my laptop and prepped it as a developer machine. This was the first road block that I encountered. Eventhough Linux has gone a long way in terms of user-friendliness, for someone who has only used Windows before there are still a lot of things to be learned. I've had a lot of problems installing and configuring applications. I had to do a lot of tinkering around just to prep my machine. 
		</p>
		<span class="bold">Solution:</span>
		<p>
			Read up on Linux user guides and manuals. Be prepared also to type a lot of commands on the Terminal, as almost everything, if not all can be done there. And always remember, Google is your very best friend.
		</p>

		<h2>Setting up grails and the JAVA_HOME problem</h2>
		<p>
			This problem probably has something to do with me being a noob on Linux, but I'd like to post it anyway. I needed to run a Grails project on my dev machine so I installed the Grails packages and JDK since Grails uses Groovy which is based on Java. Since I'm new to all of this, I followed the installation instructions that was found on the Grails site <a href="http://grails.org/download/ubuntu">here</a> and how to install Java on the Ubuntu site <a href="http://askubuntu.com/questions/55848/how-do-i-install-oracle-java-jdk-7">here</a>. After the installation, I was excited to run the project so I typed:

			{% codeblock %}
			grails run-app 
			{% endcodeblock %}

			After hitting the return key I encountered this problem:

			{% codeblock %}
			JAVA_HOME is not a directory: usr/lib/jvm/jdk1.7.0/bin/java 
			{% endcodeblock %}

			I said to myself, "wait a minute, this looks familiar". Indeed it is, I had the same problem before when I was running Java-based application in Windows and the solution was to setup an Environment Variable for the JAVA_HOME in your Windows system. So how do I do that in a Linux environment? After Googling around, I found out that the ".bashrc" file located at the root directory is the equivalent of the Environment Variables in Windows. So I opened it with my text editor and typed at the last line the following:
			
			{% codeblock %}
			export JAVA_HOME="/usr/lib/jvm/jdk1.7.0"
			{% endcodeblock %}

			I removed the "/bin/java" because it was obviously pointing at a file and not the directory. After saving it, I refreshed my terminal and ran the Grails app again with fingers crossed. To my horror, I got the same error! What did I do wrong? Did I make a wrong input on the .bashrc file? Why was it saying the same error? It took me quite a long time to find the answer why.
		</p>
		<span class="bold">Solution:</span>
		<p>
			After a lot uninstalling and installing Grails and JDK, trying out different versions and asking Google for an answer it hit me; why was it still pointing to the same location of JAVA_HOME even though I already set it to a different path? Grails was probably doing something to change the value of JAVA_HOME. So after a little more googling, I stumbled upon this site: <a href="https://cis.ait.asia/course_offerings/56/handouts/267">https://cis.ait.asia/course_offerings/56/handouts/267</a>. It confirmed my suspicion, Grails WAS changing the JAVA_HOME value, so I followed what it said there. I typed on my terminal the following:

			{% codeblock %}
			sudo gedit /usr/share/grails/2.1.1/bin/startGrails
			{% endcodeblock %}

			I finally found the culprit! At the beginning of the file, I saw that it was indeed changing the JAVA_HOME variable. So I deleted that line, saved it and restarted my terminal. I ran the Grails app and victory at last!
		</p>
		<p class="italics">Note: You can probably correct the JAVA_HOME variable path from there, but I like to have a single location for this variable so I chose the one on the .bashrc file.</p>

		<h2>Changing GIT config and online repository ssh keys</h2>
		<p>
			When I started learning all these development tools, I was using my personnal email in my Git configuration. After getting my work email, I decided to use this new mail to create a new <a href="https://github.com">GitHub</a> account. I was still studying Git and part of the leasons was to learn how to push to an online repository and using ssh keys so that I don't need to type my username and password repeatedly. Everything was going smooth until I decided to open my .gitconfig file and found out that I was still using my personnal email. So I changed the configuration and used my work email (not sure if it matters but I changed it anyway), regenerated my ssh key and saved it to GitHub. After that my git wasn't pushing anymore, so what wrong did I do now? 
		</p>

		<span class="bold">Solution:</span>
		<p>
			After repeatedly deleting and regenerating my ssh key, I was going nowhere. So I did a little snooping around the .ssh directory:

{% codeblock %}
ls ~/.ssh
id_rsa  id_rsa.pub  known_hosts
{% endcodeblock %}
			
			I know that I am getting my ssh key from the id_rsa.pub file, but this known_hosts file really caught my eye. I opened it and it was all gibberish, but as the name implied, it probably was a log of remote hosts and repos but I wasn't so sure. I decided to delete it anyway, regenerated my ssh keys and accessed my remote repository, and it worked! There was a new known_hosts file on the ssh directory that was created and everything was running smoothly again.
		</p>

		<p>
			These are all the road blocks that I had so far, I will continue to update this blog whenever I encounter a new one.
		</p>
	</article>
</section>
